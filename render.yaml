services:
  # Web Service - Spring Boot Application
  - type: web
    name: url-shortener
    runtime: docker
    repo: https://github.com/ShivamJhaXXIII/Url-Shortener.git # Update this!
    branch: main
    dockerfilePath: ./Dockerfile
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: url-shortener-db
          property: connectionString
      - key: LOG_LEVEL
        value: "INFO"
      - key: SHOW_SQL
        value: "false"
    healthCheckPath: /
    autoDeploy: true

databases:
  # PostgreSQL Database
  - name: url-shortener-db
    databaseName: url_db
    user: postgres
    plan: free


